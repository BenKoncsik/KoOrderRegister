name: Test

on:
  push:
    branches: 
       - 92-test-barnch 
       - 92-create-github-runner
  pull_request:
    branches: 
       - 92-test-barnch
       - 92-create-github-runner

jobs:
  prepare-version:
    runs-on: self-hosted
    outputs:
      new-version: ${{ steps.set_version.outputs.new-version }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set new version
        id: set_version
        run: |
           MAJOR_VERSION=${{ vars.MAJOR_VERSION }}
           MINOR_VERSION=${{ vars.MINOR_VERSION+1 }}
           PATCH_VERSION=${{ vars.PATCH_VERSION+1 }}
           echo "Building major version $MAJOR_VERSION.$MINOR_VERSION.$PATCH_VERSION"
           vars.PATCH_VERSION=PATCH_VERSION
          
